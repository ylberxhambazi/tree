'use strict';((D,d,E,l)=>{let u=!1,m=null,v=!0,A=!0,y=!1,r=null;const h=Object.assign({speed:0,element:"module_row",offset:null,navigation:"#main-nav,.module-menu .nav",updateHash:!0},tbLocalScript.scrollHighlight),n=parseInt(h.offset),g=E.top,p=l.getElementById("headerwrap"),q={init(b){v=null!==p&&d.body[0].classList.contains("fixed-header-enabled")||0<n;if(!1===y){const a=g.location.hash.replace("#","");if(a&&"#"!==a){let c=z(l.querySelectorAll("."+h.element+'[data-anchor="'+a+'"]'));if(!c){let e=
l.querySelector('.module [data-id="'+a+'"]');e&&(c=e.closest(".module"))}c&&this.scrollTo(c,a)}y=!0}this.createObserver(b)},changeHash(){if(!1===u){const a=g.location.hash.replace("#",""),c=l.querySelectorAll(h.navigation);for(let e=c.length-1;-1<e;--e){let f=c[e].getElementsByClassName("current-menu-item");for(var b=f.length-1;-1<b;--b)null===r&&(r=f[b].getElementsByTagName("a")[0].getAttribute("href")),f[b].classList.remove("current_page_item","current-menu-item");(f=""!==a&&"#"!==a?c[e].querySelectorAll('a[href*="#'+
a+'"]'):null)&&0!==f.length||(f=c[e].querySelectorAll('a[href="'+r+'"]'));for(b=f.length-1;-1<b;--b){let t=f[b].parentNode;t.classList.add("current-menu-item");t.classList.contains("menu-item-object-page")&&t.classList.add("current_page_item")}}null===r&&(r=g.location.href.split("#")[0])}},calculatePosition(b){b=D(b).offset().top+2;if(!0===v)if(n)b-=n-2;else if(p.classList.contains("fixed-header")){const a=p.getBoundingClientRect().bottom+2;b>=a&&(b-=a)}return b},scrollTo(b,a){u=!0;d.lazyScroll(d.convert(d.selectWithParent("[data-lazy]",
b)).reverse(),!0);const c=d.lazyScrolling,e=!1===y,f=()=>{const F=B(),w=l.getElementsByClassName(h.element),H=new IntersectionObserver((k,G)=>{for(let x=k.length-1;-1<x;--x)!0===k[x].isIntersecting&&d.lazyScroll(d.convert(d.selectWithParent("[data-lazy]",k[x].target)).reverse(),!0);G.disconnect()},{rootMargin:"300px 0px 300px 0px",threshold:.01});for(let k=w.length-1;-1<k;--k)w[k].hasAttribute("data-lazy")&&!w[k].classList.contains("hide-"+F)&&H.observe(w[k]);!0===v&&(n||p.classList.contains("fixed-header"))&&
d.scrollTo(this.calculatePosition(b),h.speed);d.lazyScrolling=c;u=!1;!1===e&&(a=b.hasAttribute("data-hide-anchor")?"":"#"+a.replace("#",""),g.history.replaceState(null,null,a));q.changeHash()},t=!0!==v||!n&&p.classList.contains("fixed-header")?null:()=>{(n||p.classList.contains("fixed-header"))&&d.scrollTo(this.calculatePosition(b),h.speed,f)};d.lazyScrolling=!0;d.scrollTo(this.calculatePosition(b),h.speed,f,t);l.activeElement.blur()},createObserver(b){if(h.updateHash){null===m&&(m=new IntersectionObserver((a,
c)=>{if(!1===u){c=!1;for(let e=0,f=a.length;e<f;++e)!0===a[e].isIntersecting&&(c=a[e].target.getAttribute("data-anchor"));!1===c?!1===A?(g.history.replaceState(null,null," "),q.changeHash()):A=!1:(g.history.replaceState(null,null,"#"+c),q.changeHash())}},{rootMargin:"0px 0px -100%",thresholds:[0,1]}));b=d.selectWithParent(h.element,b);for(let a=b.length-1;-1<a;--a)if(!b[a].hasAttribute("data-hide-anchor")){let c=b[a].getAttribute("data-anchor");c&&"#"!==c&&m.observe(b[a])}}}},B=()=>{const b=d.w,a=
tbLocalScript.breakpoints;for(let c in a)if(Array.isArray(a[c])){if(b>=a[c][0]&&b<=a[c][1])return c}else if(b<=a[c])return c;return"desktop"},z=b=>{if(!b[1])return b[0]?b[0]:null;let a=B();for(let c=0,e=b.length;c<e;++c)if(!b[c].classList.contains("hide-"+a))return b[c];return null},C=()=>{q.changeHash()};d.on("tb_scroll_highlight_enable",()=>{g.addEventListener("hashchange",C,{passive:!0});d.body.on("click.tb_scroll_highlight",'[href*="#"]',function(b){var a=this.getAttribute("href");if(""!==a&&
null!==a&&"#"!==a&&(a=new URL(a,g.location),a.hostname===g.location.hostname&&a.hash&&a.pathname===g.location.pathname&&(a=a.hash,""!==a&&"#"!==a))){const c=z(l.querySelectorAll("."+h.element+'[data-anchor="'+a.replace("#","")+'"]'));if(c||z(l.querySelectorAll(a+".module,"+a+".module_row")))d.trigger("tf_side_menu_hide_all"),c&&(b.preventDefault(),b.stopPropagation(),q.scrollTo(c,a))}})}).on("tb_scroll_highlight_disable",()=>{m&&(m.disconnect(),m=null);g.removeEventListener("hashchange",C,{passive:!0});
d.body.off("click.tb_scroll_highlight")}).on("tb_init_scroll_highlight",b=>{q.init(b);d.trigger("tb_scroll_highlight_enable")})})(jQuery,Themify,window,document);
